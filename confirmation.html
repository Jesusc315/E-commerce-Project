<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Confirmation</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="container mt-5">
      <h1>Order Confirmation</h1>
      <h2>Thank you for your order! Here are the details:</h2>

      <div id="confirmation-details">
        <!-- Confirmation details will be displayed here -->
      </div>

      <h2>Products</h2>
      <div id="cart-items">
        <!-- Cart items will be dynamically inserted here -->
      </div>

      <h3>Subtotal: $<span id="subtotal-price"></span></h3>
      <h3>Tax: $<span id="tax-price"></span></h3>
      <h3>Total: $<span id="total-price"></span></h3>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const params = new URLSearchParams(window.location.search);

        // Extract form values and display them
        const email = params.get("email") || "Not provided";
        const address = params.get("address") || "Not provided";
        const apartment = params.get("apartment") || "Not provided";
        const city = params.get("city") || "Not provided";
        const state = params.get("state") || "Not provided";
        const zip = params.get("zip") || "Not provided";
        const subtotal = params.get("subtotal") || "0.00";
        const tax = params.get("tax") || "0.00";
        const total = params.get("total") || "0.00";

        // Display form data
        const confirmationDetails = document.getElementById("confirmation-details");
        confirmationDetails.innerHTML = `
          <p><strong>Email:</strong> ${email}</p>
          <p><strong>Address:</strong> ${address}</p>
          ${apartment ? `<p><strong>Apartment:</strong> ${apartment}</p>` : ""}
          <p><strong>City:</strong> ${city}</p>
          <p><strong>State:</strong> ${state}</p>
          <p><strong>Zip Code:</strong> ${zip}</p>
        `;

        // Display products and total
        let productsHTML = "";
        let productIndex = 0;
        while (params.get(`product_${productIndex}`)) {
          const product = params.get(`product_${productIndex}`);
          productsHTML += `<p>${product}</p>`;
          productIndex++;
        }

        document.getElementById("cart-items").innerHTML = productsHTML;
        document.getElementById("subtotal-price").innerText = subtotal;
        document.getElementById("tax-price").innerText = tax;
        document.getElementById("total-price").innerText = total;
      });
    </script>
  </body>
</html>
